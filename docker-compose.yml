services:
  tag-helper:
    build: .
    container_name: teddycloud-tag-helper
    ports:
      - "${PORT:-3000}:80"
    environment:
      # TeddyCloud connection (configure in setup wizard after first start)
      - TEDDYCLOUD_URL=${TEDDYCLOUD_URL:-http://docker}
    volumes:
      # TeddyCloud data volume (REQUIRES WRITE ACCESS for covers and tonies.json)
      # Set TEDDYCLOUD_DATA_PATH in Portainer environment variables
      # Example: TEDDYCLOUD_DATA_PATH=/docker/appdata/teddycloud
      - ${TEDDYCLOUD_DATA_PATH:-teddycloud-data}:/data

      # Config directory - creates /docker/appdata/teddycloud-tag-helper/ for easy access
      # Set CONFIG_PATH to customize location (default: ./data)
      - ${CONFIG_PATH:-./data}:/config

      # Note: If using SMB/network share instead, configure in setup wizard
    restart: unless-stopped
    networks:
      - tag-helper-network

networks:
  tag-helper-network:
    driver: bridge

volumes:
  teddycloud-data:
    # Only needed if not using bind mount via TEDDYCLOUD_DATA_PATH
    # Recommended: Use bind mount for easier access
